<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for spec/inverted-index-test.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../prettify.css" />
    <link rel="stylesheet" href="../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../index.html">all files</a> / <a href="index.html">spec/</a> inverted-index-test.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>61/61</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">50% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>1/2</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/0</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">100% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>61/61</span>
      </div>
    </div>
  </div>
  <div class='status-line high'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118</td><td class="line-coverage quiet"><span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">31×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-yes">1×</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js"><span class="missing-if-branch" title="else path not taken" >E</span>if (typeof InvertedIndex === 'undefined') {
  // eslint-disable-next-line global-require
  InvertedIndex = require('../src/inverted-index.js');
}
&nbsp;
const books = {
  correct: [{
    title: 'Alice in Wonderland',
    text: 'Alice falls into a rabbit hole and enters a world full of imagination.'
  }, {
    title: 'The Lord of the Rings: The Fellowship of the Ring.',
    text: 'An unusual alliance of man, elf, dwarf, wizard and hobbit seek to destroy a powerful ring.'
  }],
  wrong: [{
    name: 'Alice in Nigeria',
    text: 'Alice went to Ikeja City Mall.'
  }, {
    name: 'The Lord of the Rings: The Fellowship of the Ring.',
    text: 'An unusual alliance of man, elf, dwarf, wizard and hobbit seek to destroy a powerful ring.'
  }],
  newdoc: [{
    title: 'Simisola Akinrele',
    text: 'Lives in Nigeira.'
  }, {
    title: 'Andela',
    text: 'Become a world class developer at Andela.'
  }]
};
&nbsp;
describe('Test suite for Inverted Index', () =&gt; {
  const index = new InvertedIndex();
  const myIndex = index.createIndex('books.json', books.correct);
  index.createIndex('newfile.json', books.newdoc);
  describe('Read book data', () =&gt; {
    it('Should confirm that the file is a JSON file', () =&gt; {
      expect(index.validateDoc(books.correct)).toBe(true);
      expect(index.validateDoc(books.wrong)).toBe(false);
    });
    it('Should confirm that the JSON file is not Empty', () =&gt; {
      expect(index.validateDoc(books.correct)).toBe(true);
    });
    it(`Should ensure each object in JSON array
        contains a property whose value is a string.
        `, () =&gt; {
      expect(index.validateDoc(books.correct)).toBe(true);
    });
  });
&nbsp;
  describe('Populate Index', () =&gt; {
    const mykeys = Object.keys(myIndex);
    it('Should ensure index is created once JSON file has been read', () =&gt; {
      expect(typeof myIndex).toBe('object');
      expect(Array.isArray(myIndex)).toBe(false);
    });
    it('Should ensure index is correct.', () =&gt; {
      expect(myIndex.alice).toEqual([0]);
      expect(myIndex.a).toEqual([0, 1]);
      expect(myIndex.a).not.toEqual([2]);
    });
    it(`Should ensure each object in JSON array 
        contains a property whose value is a string.`, () =&gt; {
      mykeys.forEach((doc) =&gt; {
        expect(typeof doc).toBe('string');
      });
    });
&nbsp;
    it('Should ensure index is not overwritten by a new JSON file.', () =&gt; {
      expect(Array.isArray(index.indices['books.json'])).toBe(false);
      expect(Array.isArray(index.indices['newfile.json'])).toBe(false);
      expect(typeof index.indices['books.json']).toBe('object');
      expect(typeof index.indices['newfile.json']).toBe('object');
    });
  });
&nbsp;
  describe('Search Index', () =&gt; {
    const searchResult = index.searchIndex(['books.json'], 'a');
    it('Should ensure index returns the correct results when searched.', () =&gt; {
      expect(searchResult.a['books.json']).toEqual([0, 1]);
    });
    const arrayResult = index.searchIndex(['books.json'], ['unusual', 'alice']);
    it('Should ensure searchIndex can handle an array of search terms.', () =&gt; {
      expect(arrayResult.unusual['books.json']).toEqual([1]);
      expect(arrayResult.alice['books.json']).toEqual([0]);
    });
    const variedResult = index
      .searchIndex(['books.json'], 'the', 'lord', 'man');
    it(`Should ensure searchIndex can handle 
        a varied number of search terms as arguments.`, () =&gt; {
      expect(variedResult.the['books.json']).toEqual([1]);
      expect(variedResult.lord['books.json']).toEqual([1]);
      expect(variedResult.man['books.json']).toEqual([1]);
    });
    it('Should ensure search does not take too long to execute.', () =&gt; {
      const start = Date.now();
      index.searchIndex(['books.json'], 'alice', 'the', 'man');
      const end = Date.now();
      const final = end - start;
      expect(final).toBeLessThan(0.5);
    });
    it(`Should ensure searchIndex goes through all indexed files if a filename 
        is not passed, i.e filename argument should be made optional`, () =&gt; {
      const searchall = index.searchIndex(null, 'the', 'lord', 'man');
      expect(searchall.the['books.json']).toEqual([1]);
      expect(searchall.lord['books.json']).toEqual([1]);
      expect(searchall.man['books.json']).toEqual([1]);
    });
  });
&nbsp;
  describe('Get Index', () =&gt; {
    it(`Should ensure getIndex method takes a string
     argument that specifies the location of the JSON data.`, () =&gt; {
      const search = index.getIndex('books.json');
      expect(Array.isArray(search)).toBe(false);
      expect(typeof search).toBe('object');
    });
  });
});
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Mon Jan 30 2017 11:25:05 GMT+0100 (WAT)
</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
